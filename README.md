# Krainet - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–ø—É—Å–∫—É.

–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

    Java 17 –∏–ª–∏ –Ω–æ–≤–µ–µ
    Maven 3.8+ (–¥–ª—è —Å–±–æ—Ä–∫–∏)
    PostgreSQL 14+ (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ë–î)
    Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

        mvn clean package

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –≤ –ø–∞–ø–∫–µ target –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª:

krainet-0.0.1-SNAPSHOT.jar

2.–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

    PostgreSQL –∑–∞–ø—É—â–µ–Ω –Ω–∞ localhost:5432
    –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ë–î krainet
    –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:

    CREATE USER anton WITH PASSWORD '1234';
    GRANT ALL PRIVILEGES ON DATABASE krainet TO anton;

3.–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

    java -jar target/krainet-0.0.1-SNAPSHOT.jar

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 8081.

# –î–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ

–°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
üåê http://localhost:8081

–¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–ª–æ–≥–∏–Ω ‚Üí –ø–∞—Ä–æ–ª—å):

| –†–æ–ª—å       | –õ–æ–≥–∏–Ω       | –ü–∞—Ä–æ–ª—å    | –î–æ—Å—Ç—É–ø               |
|------------|-------------|-----------|----------------------|
| **ADMIN**  | `admin`     | `admin`   | –ü–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞         |
| **ADMIN**  | `boss`      | `boss`    | –ü–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞         |
| **USER**   | `staff`     | `staff`   | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø  |
| **USER**   | `heisenberg`| `user`    | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø  |


# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–∏–∑ application.yml):

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

    spring.datasource:
    url: jdbc:postgresql://localhost:5432/krainet
    username: anton
    password: "1234"

–°–µ—Ä–≤–µ—Ä

    server:
    port: 8081

–î—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

    flyway:
    locations: classpath:db/migration
    mail:
    host: localhost
    port: 1027

# –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

1. –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:

    psql -h localhost -U anton -d krainet

    –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ë–î.

2. –ú–∏–≥—Ä–∞—Ü–∏–∏ Flyway:

    –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ SQL-—Ñ–∞–π–ª–æ–≤ –≤ src/main/resources/db/migration

    –õ–æ–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–π –≤—ã–≤–æ–¥—è—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

3. –ü–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä:

    –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–∂–∏–¥–∞–µ—Ç SMTP-—Å–µ—Ä–≤–µ—Ä –Ω–∞ localhost:1027 (–¥–ª—è —Ç–µ—Å—Ç–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MailHog)

# Docker-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL:

        docker run --name krainet-db -e POSTGRES_USER=anton -e POSTGRES_PASSWORD=1234 -e POSTGRES_DB=krainet -p 5432:5432 -d postgres:14


2. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

        mvn clean package
        docker build -t krainet-app .
        docker run -p 8081:8081 --name krainet-app --link krainet-db -d krainet-app